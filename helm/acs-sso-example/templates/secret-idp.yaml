{{- if not (lookup "v1" "Secret" $.Release.Namespace "keycloak-admin") }}
apiVersion: v1
kind: Secret
metadata:
  name: keycloak-admin
  labels: {{- include "acs-sso-example.labels" . | nindent 4 }}
data:
  {{- with .Values.keycloakx }}
  KEYCLOAK_ADMIN: {{ .admin.username | default "admin" | b64enc | quote }}
  KEYCLOAK_ADMIN_PASSWORD: {{ .admin.password | default (randAscii 16) | b64enc | quote  }}
  {{- end }}
{{- end }}
