# Default values for acs-sso-example.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

repository-database:
  nameOverride: repository-database
  auth:
    database: alfresco
    username: alfresco
    password: alfresco
  primary:
    persistence:
      enabled: false
    extendedConfiguration: |
      max_connections = 150
      shared_buffers = 512MB
      effective_cache_size = 2GB
      wal_level = minimal
      max_wal_senders = 0
      max_replication_slots = 0
      log_min_messages = LOG
    resources:
      requests:
        cpu: 250m
        memory: 1Gi
      limits:
        cpu: "4"
        memory: 4Gi

keycloakx:
  admin:
    # -- Keycloak admin username
    # -- @default admin
    username: null
    # -- Keycloak admin password
    # -- @default andomly generated on first deployment get value using:
    # kubectl -n alfresco get secrets keycloak-admin -o jsonpath='{@.data.KEYCLOAK_ADMIN_PASSWORD}' | base64 -
    password: null
  command:
    - "/opt/keycloak/bin/kc.sh"
    - "start"
    - "--http-enabled=true"
    - "--http-port=8080"
    - "--hostname-strict=false"
    - "--hostname-strict-https=false"
extraEnv: |
  - name: KEYCLOAK_ADMIN
    value: admin
  - name: KEYCLOAK_ADMIN_PASSWORD
    value: admin
  - name: JAVA_OPTS_APPEND
    value: >-
      -Djgroups.dns.query={{ include "keycloak.fullname" . }}-headless

activemq:
  persistence:
    enabled: false
  adminUser:
    user: alfresco
    password: alfresco

alfresco-repository:
  replicaCount: 1
  configuration:
    db:
      existingConfigMap:
        name: repository-database
      existingSecret:
        name: repository-database
    messageBroker:
      existingConfigMap:
        name: repository-message-broker
      existingSecret:
        name: repository-message-broker
