# Security

This pages focuses on providing information on making a secure ACS installation
via Helm Charts.

## Secrets inside values

When using Helm charts to deploy applications, it is necessary to include
sensitive information, such as passwords and API keys, in the chart's values
file. This is because the values file is used to generate the chart's
configuration templates, which are then used to deploy the application.

While it may be tempting to include the secrets directly in the values file,
this is not considered a secure practice and should only be done for test
environments.

For production deployments, there are different solutions that can work for
every Helm chart. Most of them permit encrypting secrets values and decrypting
them on-the-fly only when they are needed. Some of the most commonly used
solutions are:

* [helm-secrets](https://github.com/jkroepke/helm-secrets)
* [Mozilla SOPS](https://github.com/mozilla/sops)
* [Sealed secrets](https://github.com/bitnami-labs/sealed-secrets)

In the ACS Helm charts, you will find the possibility to provide such secrets in
an alternative way. Instead of providing credentials as values, it is possible
to provide a Kubernetes secret name, setting the appropriate
`existingSecretName` value available in the different charts. These Kubernetes
Secrets need to be created before attempting the Helm install and would contain
the necessary secrets.

For example, you can provide the `repository.adminPassword` value as a secret by
creating:

```sh
kubectl -n your-namespace create secret generic "repo-secret" \
    --from-literal=REPO_ADMIN_PASSWORD=209c6174da490caeb422f3fa5a7ae634
```

And by setting `existingSecretName` to `repo-secret` instead of
`repository.adminPassword`.

> Note: Such Kubernetes Secret needs to live within the same namespace you
> plan to deploy to.

Reference the autogenerated README.md in each chart to understand which secrets
can be provided using existing Kubernetes Secrets:

* [alfresco-content-services](../../helm/alfresco-content-services/README.md)
* [activemq](../../helm/alfresco-content-services/charts/activemq/README.md)
* [alfresco-elasticsearch-connector](../../helm/alfresco-content-services/charts/alfresco-elasticsearch-connector/README.md)
* [alfresco-search](../../helm/alfresco-content-services/charts/alfresco-search/README.md)
* [alfresco-sync-service](../../helm/alfresco-content-services/charts/alfresco-sync-service/README.md)
