
[agent]
  collection_jitter = "0s"
  debug = false
  flush_interval = "10s"
  flush_jitter = "0s"
  hostname = "$HOSTNAME"
  interval = "10s"
  logfile = ""
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  omit_hostname = false
  precision = ""
  quiet = false
  round_interval = true
[[processors.regex]]
  namepass = ["*"]
   [[processors.regex.tags]]
    key = "servicePath"
    pattern = "/alfresco/api/-default-/(private|public)/([^/]+)/versions/([0-9]+(\\.[0-9]+)*)/([^/]+)(/.*)?"
    replacement = "${5}"
    result_key = "alfresco_rest_api_endpoint"
   [[processors.regex.tags]]
    key = "servicePath"
    pattern = "/alfresco/api/-default-/(private|public)/([^/]+)/versions/([0-9]+(\\.[0-9]+)*)/([^/]+)(/.*)?"
    replacement = "${3}"
    result_key = "alfresco_rest_api_version"
   [[processors.regex.tags]]
    key = "servicePath"
    pattern = "/alfresco/api/-default-/(private|public)/([^/]+)/versions/([0-9]+(\\.[0-9]+)*)/([^/]+)(/.*)?"
    replacement = "${2}"
    result_key = "alfresco_rest_api_model"
   [[processors.regex.tag_rename]]
    pattern = "^servicePath$"
    replacement = ""

[[outputs.influxdb_v2]]
  bucket = "alfresco"
  organization = "alfresco"
  timeout = "5s"
  token = "influx"
  urls = [
    "http://influxdb2:8086"
  ]

[[inputs.prometheus]]
  urls = [
    "http://alfresco:8080/alfresco/s/prometheus"
  ]

[[inputs.jolokia2_agent]]
  urls = ["http://alfresco:7777/jolokia"]
  username = "admin"
  password = "admin"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_authority"
    mbean = "Alfresco:Name=Authority"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_batch_jobs"
    mbean = "Alfresco:Name=BatchJobs,Type=*"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_cache_statistics"
    mbean = "Alfresco:Name=CacheStatistics,*"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_connection_pool"
    mbean = "Alfresco:Name=ConnectionPool"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_content_store"
    mbean = "Alfresco:Name=ContentStore,*"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_custom_model"
    mbean = "Alfresco:Name=CustomModel,*"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_database_information"
    mbean = "Alfresco:Name=DatabaseInformation"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_encryption"
    mbean = "Alfresco:Name=Encryption"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_global_properties"
    mbean = "Alfresco:Name=GlobalProperties"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_log4j_management"
    mbean = "Alfresco:Name=Log4jManagement"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_metadata_query_indexes_check"
    mbean = "Alfresco:Name=MetadataQueryIndexesCheck"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_module_service"
    mbean = "Alfresco:Name=ModuleService"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_patch_service"
    mbean = "Alfresco:Name=PatchService"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_repo_server_mgmt"
    mbean = "Alfresco:Name=RepoServerMgmt"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_repository_descriptor"
    mbean = "Alfresco:Name=RepositoryDescriptor,*"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_running_actions"
    mbean = "Alfresco:Name=RunningActions"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_runtime"
    mbean = "Alfresco:Name=Runtime"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_schedule"
    mbean = "Alfresco:Name=Schedule,*"

  [[inputs.jolokia2_agent.metric]]
    name = "alfresco_system_properties"
    mbean = "Alfresco:Name=SystemProperties"

[[inputs.internal]]
  collect_memstats = false
