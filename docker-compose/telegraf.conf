
[agent]
  collection_jitter = "0s"
  debug = false
  flush_interval = "10s"
  flush_jitter = "0s"
  hostname = "$HOSTNAME"
  interval = "10s"
  logfile = ""
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  omit_hostname = false
  precision = ""
  quiet = false
  round_interval = true
[[processors.regex]]
  namepass = ["*"]
   [[processors.regex.tags]]
    key = "servicePath"
    pattern = "/alfresco/api/-default-/(private|public)/([^/]+)/versions/([0-9]+(\\.[0-9]+)*)/([^/]+)(/.*)?"
    replacement = "${5}"
    result_key = "alfresco_rest_api_endpoint"
   [[processors.regex.tags]]
    key = "servicePath"
    pattern = "/alfresco/api/-default-/(private|public)/([^/]+)/versions/([0-9]+(\\.[0-9]+)*)/([^/]+)(/.*)?"
    replacement = "${3}"
    result_key = "alfresco_rest_api_version"
   [[processors.regex.tags]]
    key = "servicePath"
    pattern = "/alfresco/api/-default-/(private|public)/([^/]+)/versions/([0-9]+(\\.[0-9]+)*)/([^/]+)(/.*)?"
    replacement = "${2}"
    result_key = "alfresco_rest_api_model"
   [[processors.regex.tag_rename]]
    pattern = "^servicePath$"
    replacement = ""

[[outputs.influxdb_v2]]
  bucket = "alfresco"
  organization = "alfresco"
  timeout = "5s"
  token = "influx"
  urls = [
    "http://influxdb2:8086"
  ]

[[inputs.prometheus]]
  urls = [
    "http://alfresco:8080/alfresco/s/prometheus"
  ]

[[inputs.internal]]
  collect_memstats = false
